로컬 spec/plan 문서를 기반으로 Linear 이슈를 생성합니다.

이 명령어는 다음 단계를 수행합니다:
1. 로컬 spec/plan 문서 경로 확인
2. 문서 품질 검증 (3가지 필수 기준)
3. 검증 통과 시 Linear 이슈 생성

---

## 0. 설정 파일 확인

```bash
cat .ai-workflow/config.json 2>&1
```

설정 파일이 없으면:

---

**Linear 설정이 필요합니다**

`.ai-workflow/config.json` 파일이 없습니다.
먼저 `/ai-workflow:setup` 명령어를 실행하여 Linear 연결을 설정해주세요.

---

**파일이 없으면 여기서 중단하세요.**

---

## 1. Spec/Plan 문서 경로 확인

사용자에게 문서 경로를 확인합니다:

> Linear 이슈로 등록할 spec 또는 plan 문서의 경로를 알려주세요.
>
> 예시:
> - `docs/spec-user-auth.md`
> - `specs/feature-dashboard.md`

문서를 읽어서 내용을 파악합니다:

```bash
cat {document_path}
```

---

## 2. 문서 품질 검증

문서가 다음 **3가지 필수 기준**을 충족하는지 검증합니다.

### 검증 기준 체크리스트

#### ✅ 기준 1: 작업 상세도 (Clarity)

작업을 충분히 이해할 수 있을 정도로 상세하게 작성되었는지 확인합니다.

**확인 항목:**
- [ ] 기능의 목적/배경이 명확한가?
- [ ] 요구사항이 구체적으로 나열되어 있는가?
- [ ] 사용자 시나리오 또는 유스케이스가 있는가?
- [ ] 모호한 표현 없이 명확하게 작성되었는가?

**부족하면:**
> ⚠️ 작업 상세도가 부족합니다.
>
> 다음 내용을 보완해주세요:
> - {missing_item_1}
> - {missing_item_2}

---

#### ✅ 기준 2: 기술 구현 내용 (Technical Details)

기술적 구현 관련 내용이 포함되어 있는지 확인합니다.

**확인 항목:**
- [ ] 관련 파일/컴포넌트가 명시되어 있는가?
- [ ] 데이터 구조 또는 API 설계가 있는가?
- [ ] 기술 스택/라이브러리 언급이 있는가?
- [ ] 구현 접근 방식이 설명되어 있는가?

**부족하면:**
> ⚠️ 기술 구현 내용이 부족합니다.
>
> 다음 내용을 추가해주세요:
> - 관련 파일/컴포넌트 목록
> - 데이터 흐름 또는 API 설계
> - 구현 접근 방식

---

#### ✅ 기준 3: 평가 기준 (Acceptance Criteria)

작업 완료를 검증할 수 있는 평가 기준이 있는지 확인합니다.

**확인 항목:**
- [ ] 자동 검증 방법이 있는가? (테스트, lint, typecheck 등)
- [ ] 기능 검증 체크리스트가 있는가?
- [ ] 성공 조건이 명확한가? (정량적 기준 우선)
- [ ] 완료 정의(Definition of Done)가 있는가?

**부족하면:**
> ⚠️ 평가 기준이 부족합니다.
>
> 다음 형식으로 완료 기준을 추가해주세요:
> ```markdown
> ## 완료 기준 (Acceptance Criteria)
>
> ### 자동 검증
> | 검증 항목 | 명령어 | 성공 조건 |
> |----------|--------|----------|
> | 테스트 | `npm test` | 모든 테스트 통과 |
>
> ### 기능 검증
> - [ ] {검증_항목}: {검증_방법}
> ```

---

## 3. 검증 결과 보고

### 모든 기준 통과 시:

---

**✅ 문서 검증 통과**

| 기준 | 상태 |
|------|------|
| 작업 상세도 | ✅ 통과 |
| 기술 구현 내용 | ✅ 통과 |
| 평가 기준 | ✅ 통과 |

Linear 이슈를 생성할까요?

---

### 기준 미충족 시:

---

**❌ 문서 검증 실패**

| 기준 | 상태 |
|------|------|
| 작업 상세도 | {✅/❌} |
| 기술 구현 내용 | {✅/❌} |
| 평가 기준 | {✅/❌} |

**보완이 필요한 항목:**
{detailed_feedback}

문서를 수정한 후 다시 시도해주세요.

---

**검증 실패 시 이슈를 생성하지 않습니다.**

---

## 4. Linear 이슈 생성

검증 통과 후 사용자 확인을 받으면 이슈를 생성합니다.

문서에서 추출할 정보:
- **제목**: 문서의 제목 또는 기능명
- **설명**: 문서 전체 내용 (마크다운 형식 유지)
- **우선순위**: 문서에 명시된 우선순위 (없으면 사용자에게 확인)

```
mcp__linear__create_issue:
  team: {teamKey from config}
  project: {projectId from config}  # 있으면
  title: {extracted_title}
  description: |
    {full_document_content}

    ---
    📄 Source: `{document_path}`
  priority: {1-4}
  labels: ["ai-workflow"]
```

---

## 5. 완료 보고

---

**이슈 생성 완료**

**생성된 이슈:**
- ID: `{issue_identifier}` (예: TEAM-123)
- 제목: {title}
- 우선순위: {priority}
- 상태: Backlog

**문서 검증 결과:**
| 기준 | 상태 |
|------|------|
| 작업 상세도 | ✅ |
| 기술 구현 내용 | ✅ |
| 평가 기준 | ✅ |

**Linear 링크:** {issue_url}

**다음 단계:**
작업을 시작하려면 이슈 상태를 `In Progress`로 변경하세요.

---

## Sub-task 생성 (선택사항)

문서에 여러 작업 단계가 있으면 sub-issue로 분할합니다:

```
mcp__linear__create_issue:
  team: {teamKey}
  title: {subtask_title}
  parentId: {parent_issue_id}
  labels: ["ai-workflow"]
```

---

## 주의사항

- **검증 통과 전에는 이슈를 생성하지 않습니다**
- 3가지 기준 모두 충족해야 합니다
- 문서 내용 전체가 이슈 description에 포함됩니다
- 문서 경로가 이슈에 기록됩니다
- `ai-workflow` 라벨은 항상 추가됩니다
